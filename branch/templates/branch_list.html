{% extends 'base.html' %}
{% block title %}Branch{% endblock %}
{% block header_title %}<strong>Branch</strong><span class="muted"> / list</span>{% endblock %}
{% block active_branch %}active{% endblock %}

{% block content %}

<div class="card" style="padding:0;">

  <!-- Header Row -->
  <div style="display:flex; justify-content:space-between; align-items:center;
              padding:16px 20px; border-bottom:1px solid rgba(255,255,255,.06);">
    <h2 style="margin:0;">Branches</h2>

    <a href="{% url 'add_branch' %}"
       class="btn"
       style="padding:10px; width:40px; height:40px; justify-content:center;"
       title="Add Branch">
      <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18"
           viewBox="0 0 24 24" fill="none" stroke="currentColor"
           stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="12" cy="12" r="10"></circle>
        <line x1="12" y1="8" x2="12" y2="16"></line>
        <line x1="8" y1="12" x2="16" y2="12"></line>
      </svg>
    </a>
  </div>

  <!-- Table Section -->
  <div style="padding:12px 20px 20px;">
    <div style="overflow:auto;">

      <table style="width:100%; border-collapse:separate; border-spacing:0 8px;">
        <thead>
          <tr style="background: var(--hover);">
            <th style="padding:12px; text-align:left;">#</th>
            <th style="padding:12px; text-align:left;">Branch Name</th>
            <th style="padding:12px; text-align:left;">Edit</th>
            <th style="padding:12px; text-align:left;">Delete</th>
          </tr>
        </thead>

        <tbody>
          {% for br in branches %}
            <tr style="background:#0f1b31;">

              <td style="padding:12px;">{{ forloop.counter }}</td>

              <td style="padding:12px;">
                {{ br.name }}
              </td>

              <!-- Edit Button -->
              <td style="padding:12px;">
                <a href="{% url 'edit_branch' br.id %}"
                   class="btn"
                   style="padding:8px; width:36px; height:36px; display:flex; justify-content:center; align-items:center;">
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                       viewBox="0 0 24 24" fill="none" stroke="currentColor"
                       stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M12 20h9"></path>
                    <path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4Z"></path>
                  </svg>
                </a>
              </td>

              <!-- Delete Button -->
              <td style="padding:12px;">
                <form method="post" action="{% url 'delete_branch' br.id %}"
                      onsubmit="return confirm('Are you sure you want to delete this branch?');">
                  {% csrf_token %}
                  <button class="btn"
                          style="padding:8px; width:36px; height:36px; display:flex; justify-content:center; align-items:center;"
                          title="Delete">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                         viewBox="0 0 24 24" fill="none" stroke="currentColor"
                         stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <polyline points="3 6 5 6 21 6"></polyline>
                      <path d="M19 6l-1 14a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2L5 6"></path>
                      <path d="M10 11v6"></path>
                      <path d="M14 11v6"></path>
                      <path d="M9 6V4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v2"></path>
                    </svg>
                  </button>
                </form>
              </td>

            </tr>
          {% empty %}
            <tr style="background:#0f1b31;">
              <td colspan="4" style="padding:14px;">No branches yet.</td>
            </tr>
          {% endfor %}
        </tbody>

      </table>

    </div>
  </div>
</div>

{% endblock %}
