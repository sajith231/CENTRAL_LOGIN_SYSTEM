{% extends "base.html" %}
{% load static %}

{% block title %}User Menu Control{% endblock %}
{% block header_title %}<strong>User Menu Control</strong><span class="muted"> / users</span>{% endblock %}
{% block active_user_menu_control %}active{% endblock %}

{% block content %}
  {% if messages %}
    {% for message in messages %}
      <div class="card" style="margin-bottom:12px;">{{ message }}</div>
    {% endfor %}
  {% endif %}

  <div class="card" style="padding:0;">
    <div style="display:flex; justify-content:space-between; align-items:center; padding:16px 20px; border-bottom:1px solid rgba(255,255,255,.06);">
      <h2 style="margin:0;">Select User</h2>
    </div>

    <div style="padding:12px 20px 20px;">
      <div style="overflow:auto;">
        <table style="width:100%; border-collapse:separate; border-spacing:0 8px;">
          <thead>
            <tr>
              <th style="text-align:left; padding:10px;">#</th>
              <th style="text-align:left; padding:10px;">Name</th>
              <th style="text-align:left; padding:10px;">Email</th>
              <th style="text-align:left; padding:10px;">Branch</th>
              <th style="text-align:left; padding:10px;">Level</th>
              <th style="text-align:left; padding:10px;">Menu Control</th>
            </tr>
          </thead>
          <tbody>
            {% for u in users %}
              <tr style="background:#0f1b31;">
                <td style="padding:10px;">{{ forloop.counter }}</td>
                <td style="padding:10px;">{{ u.name }}</td>
                <td style="padding:10px;">{{ u.email }}</td>
                <td style="padding:10px;">{{ u.branch.name|default:"-" }}</td>
                <td style="padding:10px;">{{ u.level }}</td>
                <td style="padding:10px;">
                  <a href="{% url 'user_controll:configure_user_menu' u.id %}"
                     class="btn"
                     style="background:#2563eb; color:white; padding:6px 12px; border-radius:6px;">
                    <i class="fa-solid fa-user-gear"></i> Configure
                  </a>
                </td>
              </tr>
            {% empty %}
              <tr style="background:#0f1b31;">
                <td colspan="6" style="padding:12px;">No users found.</td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
{% endblock %}
